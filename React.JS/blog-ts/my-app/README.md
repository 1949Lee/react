# React+SCSS+TypeScript+IDEA(WebStorm)项目搭建
这个文档的初衷是为了不使用**creat-react-app**的工作流，想自己用webpack搭建React的工作流。
> 注：**creat-react-app**有一个eject命令，就是将webpack的打包那里的流程导出到项目工程目录中，而不是在node-modules里的依赖里。但是，导出之后的内容太多冗余代码。官方为了让我们可定制。将本来很直接的代码，封装出来。导致结构复杂。所以才有了想自己搭一套的想法。
> 如果想学习React，直接用**creat-react-app**，请忽略本文章。

## 序
这一节大概内容是：遇到问题之后，我的思考历程。怎样渐渐明确自己的目标，并一步步完成目标。
### 开发流程简述
现在用webpack开发前端项目，不管是Vue、React、还是Angular或者其他前端框架，又或者是公司内部的框架。流程基本都是相似的。注意我说的是开发流程。大致开发流程如下：
+ 确定入口。这个入口是一个`html`。也就是用户输入IP或者域名之后。最先请求的那个资源。一般来讲就是`index.html`，以下简称项目入口。项目入口中要做的一般不多，就是添加一些适配的标签、兼容性（IE）的代码或者想单独引入的必要的JS库/依赖等等。
+ 开发项目。开发项目其实就是选一个框架去开发前端项目，这个框架的选择不同的场景需要考虑不同因素。
+ webpack打包，webpack-dev-server运行。开发好之后。我们需要把我们用框架写好的代码，打包成最终可以运行到浏览器的web代码。

以上3个步骤针对框架的不同。只有后两个不同。即：我们如何用框架开发项目，开发好之后如何用webpack打包。

### 目标拆解
开发流程中，我们明确了我们要解决两个问题：
+ 如何用框架开发项目？
+ 开发好之后如何用webpack打包？

这两个问题其实很大。但是我们是带着问题思考的，想想我们最一开始想实现什么？其实是明确的：我要用TypeScript写React的一个项目，并且想自己用webpack打包这个项目。
那我们目标和上面提到的开发流程相结合，就得到了对于最初目标更加明确的目标：
+ 用自己喜欢或者符合团队习惯的放式去用TypeScript写React（组件、样式、Redux、Router等）。
+ 打包我们写好一个React项目。

第一个目标我们其实还不算最终完美，因为什么样的方式是自己喜欢的？用TypeScript写React的时候会有什么自己觉得不爽的问题？但是第一个目标有待确定的问题，却并不会影响我们先解决第二个目标。
第二个目标的本质其实就是实现用webpack打包TypeScript。因为React官方提供了对TypeScript的支持:`@types/react`,`@types/react-dom`。
到这里，你也许发现了。其实我们目标分解到最后，其实首先遇到的一个核心问题，就是如何用webpack打包TypeScript。这也太简单了，`ts-loader`呗。
思考到现在，其实我们发现我们想做的事情，其实相对来说比较常规，技术相对都是成熟的。
我们的第二个标就是用webpack打包TypeScript、样式、图片字体等文件。
但是第一个目标遗漏留了问题：用TypeScript写React的时候，怎么才是自己最喜欢最舒服的方式。这为什么是问题呢？因为我不知道我想要用的方式会对我的webpack打包时有什么影响。比如我想用sCSS。那是不是需要用`sass-loader`和`node-sass`！所以我们需要先实现第二个目标。
说了这么多，我终于确定了我们的实施方案：
+ 用webpack打包TypeScript、样式、图片字体等文件。能把demo本地运行起来。
+ 跑起来之后开发体验一下，看看有什么不爽的地方，再解决。

其实为什么会有这个序？因为我想记录一下我的思考过程。因为对于编程而言，想好怎么做，远远比上来就做要重要。想好怎么做的过程说高大上一点其实就是前期调研和方案设计。这个过程会让你想清楚我们要做的整个事，是否可以实现？难点在哪？我们的思路是否能直接确定下来？不能的话第一步如何做？如何一步步明确思路（摸着石头过河）。

## 正文

### webpack打包TypeScript、CSS写的React

### CSS升级到SCSS

### React中的组件化样式


## 遇到的问题

### CSS Module的提示。

### IDEA中TypeScript的导入
用IDEA的时候，发现可以自动导入React中的自定义组件，但是，自动导入时有问题：组件文件路径有问题、组件自动导入的文件后缀不是`.tsx`。
如何解决呢，这个是IDEA的配置问题，如果你也遇到了。请做这样的修改。打开IDEA偏好设置：找到Preference | Editor | Code Style | TypeScript | Imports。
两个勾选项：
+ Use path relevant to tsconfig.json。这个说的是，勾选上之后，自动引入的文件路径会是相对于tsconfig.json的。所以路径根本不是相对于对应文件的。所以我取消了勾选。
+ Use .js file extension in module name. 这个说的是，勾选上之后，自动引入的模块（export的组件也是模块）会添加js文件后缀。这肯定不能勾选啊，因为我使用tsx写的React啊！！
